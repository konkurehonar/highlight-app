Server-requirements.md

# نیازمندی‌های سرور پروژه کوشک کنکور هنر

این مستند مشخصات فنی و نیازمندی‌های سرور مورد نیاز برای پروژه کوشک کنکور هنر را توضیح می‌دهد. معماری پروژه شامل فرانت‌اند مبتنی بر Next.js، بک‌اند Rust، و سرویس‌های جانبی مانند AppFlowy است که در محیط کانتینری Docker اجرا می‌شوند.

## مشخصات پیشنهادی سرور

برای میزبانی پروژه با توجه به نیازهای فنی (Next.js، Rust، AppFlowy و VPN) و کانتینرسازی با Docker، سروری با حداقل مشخصات زیر مورد نیاز است:

| منبع | حداقل مشخصات | توضیحات |
|------|--------------|---------|
| CPU | 2 هسته | برای اجرای همزمان Next.js (SSR)، Rust API و سایر سرویس‌ها |
| RAM | 4 گیگابایت | حافظه مناسب برای کانتینرهای Docker و محیط توسعه |
| دیسک | 50-100 گیگابایت SSD | فضای کافی برای کد، لاگ‌ها، دیتابیس و بک‌آپ |
| بک‌آپ | 50 گیگابایت | برای نسخه‌برداری دوره‌ای از داده‌ها و تنظیمات |
| ترافیک | حداقل 1700 گیگابایت ماهانه | کافی برای توسعه و تست MVP تا مقیاس متوسط |

## پلن‌های پیشنهادی پارس‌پک

| موقعیت | پلن | منابع | قیمت (تومان/ماه) |
|--------|-----|-------|------------------|
| ایران | irWindowsVPS 6 | 2 CPU، 4 GB RAM، 100 GB SSD، 50 GB بک‌آپ رایگان | ~۵۶۵٬۰۰۰ |
| ایران (Linux) | irLinuxVPS 2 | 2 CPU، 4 GB RAM، 100 GB SSD، 50 GB بک‌آپ رایگان | ~۴۵۰٬۰۰۰ (تقریبی) |
| اروپا | frWindowsVPS 6 | 2 CPU، 4 GB RAM، 100 GB SSD، 50 GB بک‌آپ رایگان | ~۸۲۰٬۰۰۰ |

> **نکته**: پلن‌های Linux معمولاً ۱۰-۲۰٪ ارزان‌تر از Windows هستند. اگر نیاز به سیستم‌عامل خاص ندارید، نسخه Linux را انتخاب کنید تا هزینه کمتر و کارایی بالاتری داشته باشید.

## دلایل انتخاب این مشخصات

### پردازنده (2 هسته CPU)
- اجرای همزمان سرویس‌های Next.js با قابلیت SSR
- اجرای API های Rust بدون تأخیر
- مدیریت کانتینرهای Docker متعدد
- پردازش درخواست‌های AppFlowy

### حافظه (4 گیگابایت RAM)
- تخصیص منابع کافی به هر کانتینر Docker
- اجرای بدون وقفه فرآیندهای بیلد و توسعه
- فضای کافی برای کش‌ها و بهبود عملکرد

### فضای ذخیره‌سازی (50-100 گیگابایت SSD)
- ذخیره کدهای پروژه و مخازن Git
- فایل‌های لاگ برای عیب‌یابی
- دیتابیس SQLite/Supabase محلی
- فضای کافی برای بک‌آپ‌های دوره‌ای

### بک‌آپ (50 گیگابایت)
- نسخه‌برداری دوره‌ای از داده‌های کاربران
- بک‌آپ از تنظیمات و پیکربندی‌ها
- امنیت داده‌ها در برابر خرابی احتمالی

### ترافیک (حداقل 1700 گیگابایت ماهانه)
- پوشش نیازهای ترافیکی در مراحل اولیه
- امکان تست و توسعه بدون محدودیت
- کافی برای مقیاس متوسط کاربران

## معماری استقرار

با توجه به استقرار فعلی فرانت‌اند روی Vercel، معماری زیر پیشنهاد می‌شود:

### 1. فرانت‌اند (Next.js)
- میزبانی روی **Vercel** (وضعیت فعلی)
- استفاده از CNAME یا A-Record دامنه در تنظیمات Vercel
- بهره‌مندی از قابلیت‌های Edge Function و CDN رایگان Vercel

### 2. بک‌اند و سرویس‌های دینامیک
- استقرار روی **VPS پارس‌پک**:
  - API های Rust (Axum)
  - سرور AppFlowy
  - کانتینرهای Supabase
  - سرویس WireGuard/VPN
  - عامل RAG (سیستم هوش مصنوعی)
- اجرا روی پورت‌های مختلف (مثلاً 3001 برای API، 3002 برای AppFlowy)
- استفاده از NGINX یا Traefik به عنوان Reverse Proxy

### نمودار معماری

کاربران → Vercel (Next.js) ↔ API.domain.com → پارس‌پک VPS (Rust/Axum, AppFlowy, DB)
plaintext

Hide

این معماری هم از CDN و عملکرد عالی فرانت‌اند در Vercel بهره می‌برد، هم کنترل و انعطاف‌پذیری کامل بک‌اند را روی سرور اختصاصی حفظ می‌کند.

## گام‌های استقرار

1. **خرید و راه‌اندازی سرور**
   - مراجعه به صفحه خرید VPS پارس‌پک
   - انتخاب پلن irLinuxVPS 2 (پیشنهادی)
   - تعیین دوره اشتراک (ماهانه یا سه‌ماهه)

2. **پیکربندی اولیه سرور**
   - اتصال به سرور با SSH
   - نصب و راه‌اندازی WireGuard یا OpenVPN روی پورت TCP/443
   - پیکربندی فایروال و تنظیمات امنیتی

3. **استقرار سرویس‌ها**
   - کلون مخزن Monorepo پروژه
   - ایجاد و راه‌اندازی کانتینرهای Docker (Next.js, Rust, AppFlowy)
   - پیکربندی Reverse Proxy برای مسیریابی درخواست‌ها

4. **تنظیم دامنه و DNS**
   - تنظیم رکوردهای DNS برای اتصال دامنه به Vercel و VPS
   - پیکربندی SSL/TLS با Let's Encrypt

## مسیر ارتقا

در صورت افزایش ترافیک و نیاز به منابع بیشتر، می‌توان:
- ارتقا به پلن‌های بالاتر با 4 هسته CPU و 8 گیگابایت RAM
- استفاده از چندین سرور و تقسیم سرویس‌ها
- پیاده‌سازی سیستم‌های توزیع بار (Load Balancing)
